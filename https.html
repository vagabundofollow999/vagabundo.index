<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="referrer" content="no-referrer" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<!-- Shaka Player -->
<script src="https://cdn.jsdelivr.net/npm/shaka-player@4.14.10/dist/shaka-player.ui.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/shaka-player@4.14.10/dist/controls.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Material+Icons+Sharp" rel="stylesheet">

<style>
    body {
        margin: 0;
        background-color: #000;
        height: 100vh;
        width: 100vw;
    }
    video {
        width: 100vw;
        height: 100vh;
        background-color: black;
    }
</style>
</head>

<body>

<video autoplay data-shaka-player id="player"></video>

<script>
// ✅ Aquí ponemos la URL IPTV convertida a HLS (.m3u8)
const streamUrl = "http://zeuspro.xyz:8080/L0vjEGB3MC/GF8Nqw8gZ5/3753.m3u8";

// ✅ Inicialización del Player
async function initPlayer() {
    const video = document.getElementById("player");
    const ui = video['ui'];
    const controls = ui.getControls();
    const player = controls.getPlayer();

    // ✅ DRM ClearKey (conservado de tu código original)
    player.configure({
        drm: {
            clearKeys: {
                "621a7d3654e190d28f57d4e44cb33eb8": "1af4c82c4c3c31398d6ffbf5c86f9825"
            }
        }
    });

    window.player = player;
    window.ui = ui;

    try {
        await player.load(streamUrl);  // ✅ Carga tu canal
        console.log("✅ Canal cargado con éxito");
    } catch (e) {
        console.error("❌ Error al cargar:", e);
    }
}

// ✅ Eventos del reproductor
document.addEventListener("shaka-ui-loaded", initPlayer);
document.addEventListener("shaka-ui-load-failed", () => {
    console.error("❌ Error con la UI de Shaka Player");
});
</script>

</body>
</html>